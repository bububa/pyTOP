

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>item &mdash; pyTOP 0.1.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="pyTOP 0.1.1 documentation" href="../index.html" />
    <link rel="up" title="Module code" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">pyTOP 0.1.1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for item</h1><div class="highlight"><pre>
<span class="c">#!/usr/bin/env python</span>
<span class="c"># encoding: utf-8</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">item.py</span>

<span class="sd">Created by 徐 光硕 on 2011-11-15.</span>
<span class="sd">Copyright (c) 2011 __MyCompanyName__. All rights reserved.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">api</span> <span class="kn">import</span> <span class="n">TOP</span><span class="p">,</span> <span class="n">TOPRequest</span><span class="p">,</span> <span class="n">TOPDate</span>
<span class="kn">from</span> <span class="nn">user</span> <span class="kn">import</span> <span class="n">Location</span>

<div class="viewcode-block" id="Item"><a class="viewcode-back" href="../item.html#item.Item">[docs]</a><span class="k">class</span> <span class="nc">Item</span><span class="p">(</span><span class="n">TOP</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Item(商品)结构&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">API_KEY</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ENVIRONMENT</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Item</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="p">,</span> <span class="n">ENVIRONMENT</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">models</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;skus&#39;</span><span class="p">:</span><span class="n">Sku</span><span class="p">,</span><span class="s">&#39;location&#39;</span><span class="p">:</span><span class="n">Location</span><span class="p">,</span><span class="s">&#39;item_imgs&#39;</span><span class="p">:</span><span class="n">ItemImg</span><span class="p">,</span><span class="s">&#39;prop_imgs&#39;</span><span class="p">:</span><span class="n">PropImg</span><span class="p">,</span><span class="s">&#39;videos&#39;</span><span class="p">:</span><span class="n">Video</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;detail_url&#39;</span><span class="p">,</span><span class="s">&#39;num_iid&#39;</span><span class="p">,</span><span class="s">&#39;title&#39;</span><span class="p">,</span><span class="s">&#39;nick&#39;</span><span class="p">,</span><span class="s">&#39;type&#39;</span><span class="p">,</span><span class="s">&#39;desc&#39;</span><span class="p">,</span><span class="s">&#39;skus&#39;</span><span class="p">,</span><span class="s">&#39;props_name&#39;</span><span class="p">,</span><span class="s">&#39;created&#39;</span><span class="p">,</span><span class="s">&#39;promoted_service&#39;</span><span class="p">,</span><span class="s">&#39;is_lightning_consignment&#39;</span><span class="p">,</span><span class="s">&#39;is_fenxiao&#39;</span><span class="p">,</span><span class="s">&#39;auction_point&#39;</span><span class="p">,</span><span class="s">&#39;property_alias&#39;</span><span class="p">,</span><span class="s">&#39;volume&#39;</span><span class="p">,</span><span class="s">&#39;template_id&#39;</span><span class="p">,</span><span class="s">&#39;after_sale_id&#39;</span><span class="p">,</span><span class="s">&#39;is_xinpin&#39;</span><span class="p">,</span><span class="s">&#39;sub_stock&#39;</span><span class="p">,</span><span class="s">&#39;cid&#39;</span><span class="p">,</span><span class="s">&#39;seller_cids&#39;</span><span class="p">,</span><span class="s">&#39;props&#39;</span><span class="p">,</span><span class="s">&#39;input_pids&#39;</span><span class="p">,</span><span class="s">&#39;input_str&#39;</span><span class="p">,</span><span class="s">&#39;pic_url&#39;</span><span class="p">,</span><span class="s">&#39;num&#39;</span><span class="p">,</span><span class="s">&#39;valid_thru&#39;</span><span class="p">,</span><span class="s">&#39;list_time&#39;</span><span class="p">,</span><span class="s">&#39;delist_time&#39;</span><span class="p">,</span><span class="s">&#39;stuff_status&#39;</span><span class="p">,</span><span class="s">&#39;location&#39;</span><span class="p">,</span><span class="s">&#39;price&#39;</span><span class="p">,</span><span class="s">&#39;post_fee&#39;</span><span class="p">,</span><span class="s">&#39;express_fee&#39;</span><span class="p">,</span><span class="s">&#39;ems_fee&#39;</span><span class="p">,</span><span class="s">&#39;has_discount&#39;</span><span class="p">,</span><span class="s">&#39;freight_payer&#39;</span><span class="p">,</span><span class="s">&#39;has_invoice&#39;</span><span class="p">,</span><span class="s">&#39;has_warranty&#39;</span><span class="p">,</span><span class="s">&#39;has_showcase&#39;</span><span class="p">,</span><span class="s">&#39;modified&#39;</span><span class="p">,</span><span class="s">&#39;increment&#39;</span><span class="p">,</span><span class="s">&#39;approve_status&#39;</span><span class="p">,</span><span class="s">&#39;postage_id&#39;</span><span class="p">,</span><span class="s">&#39;product_id&#39;</span><span class="p">,</span><span class="s">&#39;item_imgs&#39;</span><span class="p">,</span><span class="s">&#39;prop_imgs&#39;</span><span class="p">,</span><span class="s">&#39;outer_id&#39;</span><span class="p">,</span><span class="s">&#39;is_virtual&#39;</span><span class="p">,</span><span class="s">&#39;is_taobao&#39;</span><span class="p">,</span><span class="s">&#39;is_ex&#39;</span><span class="p">,</span><span class="s">&#39;is_timing&#39;</span><span class="p">,</span><span class="s">&#39;videos&#39;</span><span class="p">,</span><span class="s">&#39;is_3D&#39;</span><span class="p">,</span><span class="s">&#39;score&#39;</span><span class="p">,</span><span class="s">&#39;one_station&#39;</span><span class="p">,</span><span class="s">&#39;second_kill&#39;</span><span class="p">,</span><span class="s">&#39;auto_fill&#39;</span><span class="p">,</span><span class="s">&#39;violation&#39;</span><span class="p">,</span><span class="s">&#39;is_prepay&#39;</span><span class="p">,</span><span class="s">&#39;ww_status&#39;</span><span class="p">,</span><span class="s">&#39;wap_desc&#39;</span><span class="p">,</span><span class="s">&#39;wap_detail_url&#39;</span><span class="p">,</span><span class="s">&#39;cod_postage_id&#39;</span><span class="p">,</span><span class="s">&#39;sell_promise&#39;</span><span class="p">]</span>
    
<div class="viewcode-block" id="Item.add"><a class="viewcode-back" href="../item.html#item.Item.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">aType</span><span class="p">,</span> <span class="n">stuff_status</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">desc</span><span class="p">,</span> <span class="n">location_state</span><span class="p">,</span> <span class="n">location_city</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.add 添加一个商品</span>
<span class="sd">        </span>
<span class="sd">        此接口用于新增一个商品 商品所属的卖家是当前会话的用户 商品的属性和sku的属性有包含的关系，商品的价格要位于sku的价格区间之中（例如，sku价格有5元、10元两种，那么商品的价格就需要大于等于5元，小于等于10元，否则新增商品会失败） 商品的类目和商品的价格、sku的价格都有一定的相关性（具体的关系要通过类目属性查询接口获得） 商品的运费承担方式和邮费设置有相关性，卖家承担运费不用设置邮费，买家承担运费需要设置邮费 当关键属性值选择了“其他”的时候，需要输入input_pids和input_str商品才能添加成功。&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.add&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">price</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">aType</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;stuff_status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stuff_status</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">title</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;desc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">desc</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;location.state&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">location_state</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;location.city&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">location_city</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;cid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cid</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;props&#39;</span><span class="p">,</span> <span class="s">&#39;approve_status&#39;</span><span class="p">,</span> <span class="s">&#39;freight_payer&#39;</span><span class="p">,</span> <span class="s">&#39;valid_thru&#39;</span><span class="p">,</span> <span class="s">&#39;has_invoice&#39;</span><span class="p">,</span> <span class="s">&#39;has_warranty&#39;</span><span class="p">,</span> <span class="s">&#39;has_showcase&#39;</span><span class="p">,</span> <span class="s">&#39;seller_cids&#39;</span><span class="p">,</span> <span class="s">&#39;has_discount&#39;</span><span class="p">,</span> <span class="s">&#39;post_fee&#39;</span><span class="p">,</span> <span class="s">&#39;express_fee&#39;</span><span class="p">,</span> <span class="s">&#39;ems_fee&#39;</span><span class="p">,</span> <span class="s">&#39;list_time&#39;</span><span class="p">,</span> <span class="s">&#39;increment&#39;</span><span class="p">,</span> <span class="s">&#39;image&#39;</span><span class="p">,</span> <span class="s">&#39;postage_id&#39;</span><span class="p">,</span> <span class="s">&#39;auction_point&#39;</span><span class="p">,</span> <span class="s">&#39;property_alias&#39;</span><span class="p">,</span> <span class="s">&#39;input_pids&#39;</span><span class="p">,</span> <span class="s">&#39;sku_properties&#39;</span><span class="p">,</span> <span class="s">&#39;sku_prices&#39;</span><span class="p">,</span> <span class="s">&#39;sku_outer_ids&#39;</span><span class="p">,</span> <span class="s">&#39;lang&#39;</span><span class="p">,</span> <span class="s">&#39;outer_id&#39;</span><span class="p">,</span> <span class="s">&#39;product_id&#39;</span><span class="p">,</span> <span class="s">&#39;pic_path&#39;</span><span class="p">,</span> <span class="s">&#39;auto_fill&#39;</span><span class="p">,</span> <span class="s">&#39;input_str&#39;</span><span class="p">,</span> <span class="s">&#39;is_taobao&#39;</span><span class="p">,</span> <span class="s">&#39;is_ex&#39;</span><span class="p">,</span> <span class="s">&#39;is_3D&#39;</span><span class="p">,</span> <span class="s">&#39;sell_promise&#39;</span><span class="p">,</span> <span class="s">&#39;after_sale_id&#39;</span><span class="p">,</span> <span class="s">&#39;cod_postage_id&#39;</span><span class="p">,</span> <span class="s">&#39;is_lightning_consignment&#39;</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">,</span> <span class="s">&#39;is_xinpin&#39;</span><span class="p">,</span> <span class="s">&#39;sub_stock&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">v</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span> <span class="k">continue</span>
            <span class="n">request</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;item&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="Item.update"><a class="viewcode-back" href="../item.html#item.Item.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.update 更新商品信息</span>
<span class="sd">        </span>
<span class="sd">        根据传入的num_iid更新对应的商品的数据 传入的num_iid所对应的商品必须属于当前会话的用户 商品的属性和sku的属性有包含的关系，商品的价格要位于sku的价格区间之中（例如，sku价格有5元、10元两种，那么商品的价格就需要大于等于5元，小于等于10元，否则更新商品会失败） 商品的类目和商品的价格、sku的价格都有一定的相关性（具体的关系要通过类目属性查询接口获得） 当关键属性值更新为“其他”的时候，需要输入input_pids和input_str商品才能更新成功。&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.update&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;cid&#39;</span><span class="p">,</span> <span class="s">&#39;props&#39;</span><span class="p">,</span> <span class="s">&#39;num&#39;</span><span class="p">,</span> <span class="s">&#39;price&#39;</span><span class="p">,</span> <span class="s">&#39;title&#39;</span><span class="p">,</span> <span class="s">&#39;desc&#39;</span><span class="p">,</span> <span class="s">&#39;location_state&#39;</span><span class="p">,</span> <span class="s">&#39;location_city&#39;</span><span class="p">,</span> <span class="s">&#39;post_fee&#39;</span><span class="p">,</span> <span class="s">&#39;express_fee&#39;</span><span class="p">,</span> <span class="s">&#39;ems_fee&#39;</span><span class="p">,</span> <span class="s">&#39;list_time&#39;</span><span class="p">,</span> <span class="s">&#39;increment&#39;</span><span class="p">,</span> <span class="s">&#39;image&#39;</span><span class="p">,</span> <span class="s">&#39;stuff_status&#39;</span><span class="p">,</span> <span class="s">&#39;auction_point&#39;</span><span class="p">,</span> <span class="s">&#39;property_alias&#39;</span><span class="p">,</span> <span class="s">&#39;input_pids&#39;</span><span class="p">,</span> <span class="s">&#39;sku_quantities&#39;</span><span class="p">,</span> <span class="s">&#39;sku_prices&#39;</span><span class="p">,</span> <span class="s">&#39;sku_properties&#39;</span><span class="p">,</span> <span class="s">&#39;seller_cids&#39;</span><span class="p">,</span> <span class="s">&#39;postage_id&#39;</span><span class="p">,</span> <span class="s">&#39;outer_id&#39;</span><span class="p">,</span> <span class="s">&#39;product_id&#39;</span><span class="p">,</span> <span class="s">&#39;pic_path&#39;</span><span class="p">,</span> <span class="s">&#39;auto_fill&#39;</span><span class="p">,</span> <span class="s">&#39;sku_outer_ids&#39;</span><span class="p">,</span> <span class="s">&#39;is_taobao&#39;</span><span class="p">,</span> <span class="s">&#39;is_ex&#39;</span><span class="p">,</span> <span class="s">&#39;is_3D&#39;</span><span class="p">,</span> <span class="s">&#39;is_replace_sku&#39;</span><span class="p">,</span> <span class="s">&#39;input_str&#39;</span><span class="p">,</span> <span class="s">&#39;lang&#39;</span><span class="p">,</span> <span class="s">&#39;has_discount&#39;</span><span class="p">,</span> <span class="s">&#39;has_showcase&#39;</span><span class="p">,</span> <span class="s">&#39;approve_status&#39;</span><span class="p">,</span> <span class="s">&#39;freight_payer&#39;</span><span class="p">,</span> <span class="s">&#39;valid_thru&#39;</span><span class="p">,</span> <span class="s">&#39;has_invoice&#39;</span><span class="p">,</span> <span class="s">&#39;has_warranty&#39;</span><span class="p">,</span> <span class="s">&#39;after_sale_id&#39;</span><span class="p">,</span> <span class="s">&#39;sell_promise&#39;</span><span class="p">,</span> <span class="s">&#39;cod_postage_id&#39;</span><span class="p">,</span> <span class="s">&#39;is_lightning_consignment&#39;</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">,</span> <span class="s">&#39;is_xinpin&#39;</span><span class="p">,</span> <span class="s">&#39;sub_stock&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">v</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span> <span class="k">continue</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s">&#39;location_state&#39;</span><span class="p">:</span> <span class="n">k</span> <span class="o">=</span> <span class="s">&#39;location.state&#39;</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s">&#39;location_city&#39;</span><span class="p">:</span> <span class="n">k</span> <span class="o">=</span> <span class="s">&#39;location.city&#39;</span>
            <span class="n">request</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;item&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="Item.delete"><a class="viewcode-back" href="../item.html#item.Item.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.delete 删除单条商品</span>
<span class="sd">        </span>
<span class="sd">        删除单条商品&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.delete&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;item&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="Item.update_delisting"><a class="viewcode-back" href="../item.html#item.Item.update_delisting">[docs]</a>    <span class="k">def</span> <span class="nf">update_delisting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.update.delisting 商品下架</span>
<span class="sd">        </span>
<span class="sd">        单个商品下架 </span>
<span class="sd">        输入的num_iid必须属于当前会话用户&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.update.delisting&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;item&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="Item.update_listing"><a class="viewcode-back" href="../item.html#item.Item.update_listing">[docs]</a>    <span class="k">def</span> <span class="nf">update_listing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.update.listing 一口价商品上架</span>
<span class="sd">        </span>
<span class="sd">        单个商品上架 </span>
<span class="sd">        输入的num_iid必须属于当前会话用户&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.update.listing&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;item&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="Item.get"><a class="viewcode-back" href="../item.html#item.Item.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[],</span> <span class="n">session</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.get 得到单个商品信息</span>
<span class="sd">        </span>
<span class="sd">        获取单个商品的详细信息 卖家未登录时只能获得这个商品的公开数据，卖家登录后可以获取商品的所有数据&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.get&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fields</span><span class="p">:</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;fields&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;item&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="Item.price_update"><a class="viewcode-back" href="../item.html#item.Item.price_update">[docs]</a>    <span class="k">def</span> <span class="nf">price_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.price.update 更新商品价格</span>
<span class="sd">        </span>
<span class="sd">        更新商品价格&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.price.update&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;cid&#39;</span><span class="p">,</span> <span class="s">&#39;props&#39;</span><span class="p">,</span> <span class="s">&#39;num&#39;</span><span class="p">,</span> <span class="s">&#39;price&#39;</span><span class="p">,</span> <span class="s">&#39;title&#39;</span><span class="p">,</span> <span class="s">&#39;desc&#39;</span><span class="p">,</span> <span class="s">&#39;location_state&#39;</span><span class="p">,</span> <span class="s">&#39;location_city&#39;</span><span class="p">,</span> <span class="s">&#39;post_fee&#39;</span><span class="p">,</span> <span class="s">&#39;express_fee&#39;</span><span class="p">,</span> <span class="s">&#39;ems_fee&#39;</span><span class="p">,</span> <span class="s">&#39;list_time&#39;</span><span class="p">,</span> <span class="s">&#39;increment&#39;</span><span class="p">,</span> <span class="s">&#39;image&#39;</span><span class="p">,</span> <span class="s">&#39;stuff_status&#39;</span><span class="p">,</span> <span class="s">&#39;auction_point&#39;</span><span class="p">,</span> <span class="s">&#39;property_alias&#39;</span><span class="p">,</span> <span class="s">&#39;input_pids&#39;</span><span class="p">,</span> <span class="s">&#39;sku_quantities&#39;</span><span class="p">,</span> <span class="s">&#39;sku_prices&#39;</span><span class="p">,</span> <span class="s">&#39;sku_properties&#39;</span><span class="p">,</span> <span class="s">&#39;seller_cids&#39;</span><span class="p">,</span> <span class="s">&#39;postage_id&#39;</span><span class="p">,</span> <span class="s">&#39;outer_id&#39;</span><span class="p">,</span> <span class="s">&#39;product_id&#39;</span><span class="p">,</span> <span class="s">&#39;pic_path&#39;</span><span class="p">,</span> <span class="s">&#39;auto_fill&#39;</span><span class="p">,</span> <span class="s">&#39;sku_outer_ids&#39;</span><span class="p">,</span> <span class="s">&#39;is_taobao&#39;</span><span class="p">,</span> <span class="s">&#39;is_ex&#39;</span><span class="p">,</span> <span class="s">&#39;is_3D&#39;</span><span class="p">,</span> <span class="s">&#39;is_replace_sku&#39;</span><span class="p">,</span> <span class="s">&#39;input_str&#39;</span><span class="p">,</span> <span class="s">&#39;lang&#39;</span><span class="p">,</span> <span class="s">&#39;has_discount&#39;</span><span class="p">,</span> <span class="s">&#39;has_showcase&#39;</span><span class="p">,</span> <span class="s">&#39;approve_status&#39;</span><span class="p">,</span> <span class="s">&#39;freight_payer&#39;</span><span class="p">,</span> <span class="s">&#39;valid_thru&#39;</span><span class="p">,</span> <span class="s">&#39;has_invoice&#39;</span><span class="p">,</span> <span class="s">&#39;has_warranty&#39;</span><span class="p">,</span> <span class="s">&#39;after_sale_id&#39;</span><span class="p">,</span> <span class="s">&#39;sell_promise&#39;</span><span class="p">,</span> <span class="s">&#39;cod_postage_id&#39;</span><span class="p">,</span> <span class="s">&#39;is_lightning_consignment&#39;</span><span class="p">,</span> <span class="s">&#39;weight&#39;</span><span class="p">,</span> <span class="s">&#39;is_xinpin&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">v</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span> <span class="k">continue</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s">&#39;location_state&#39;</span><span class="p">:</span> <span class="n">k</span> <span class="o">=</span> <span class="s">&#39;location.state&#39;</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s">&#39;location_city&#39;</span><span class="p">:</span> <span class="n">k</span> <span class="o">=</span> <span class="s">&#39;location.city&#39;</span>
            <span class="n">request</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;item&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="Item.quantity_update"><a class="viewcode-back" href="../item.html#item.Item.quantity_update">[docs]</a>    <span class="k">def</span> <span class="nf">quantity_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">quantity</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="n">sku_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">outer_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">aType</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.quantity.update 宝贝/SKU库存修改</span>
<span class="sd">        </span>
<span class="sd">        提供按照全量或增量形式修改宝贝/SKU库存的功能&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.quantity.update&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;quantity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">quantity</span>
        <span class="k">if</span> <span class="n">sku_id</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;sku_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sku_id</span>
        <span class="k">if</span> <span class="n">outer_id</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;outer_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">outer_id</span>
        <span class="k">if</span> <span class="n">aType</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">aType</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;item&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="Item.recommend_add"><a class="viewcode-back" href="../item.html#item.Item.recommend_add">[docs]</a>    <span class="k">def</span> <span class="nf">recommend_add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.recommend.add 橱窗推荐一个商品</span>
<span class="sd">        </span>
<span class="sd">        将当前用户指定商品设置为橱窗推荐状态 橱窗推荐需要用户有剩余橱窗位才可以顺利执行 这个Item所属卖家从传入的session中获取，需要session绑定 需要判断橱窗推荐是否已满，橱窗推荐已满停止调用橱窗推荐接口，2010年1月底开放查询剩余橱窗推荐数后可以按数量橱窗推荐商品&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.recommend.add&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;item&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="Item.recommend_delete"><a class="viewcode-back" href="../item.html#item.Item.recommend_delete">[docs]</a>    <span class="k">def</span> <span class="nf">recommend_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.recommend.delete 取消橱窗推荐一个商品</span>
<span class="sd">        </span>
<span class="sd">        取消当前用户指定商品的橱窗推荐状态 这个Item所属卖家从传入的session中获取，需要session绑定&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.recommend.delete&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;item&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    
</div></div>
<div class="viewcode-block" id="Items"><a class="viewcode-back" href="../item.html#item.Items">[docs]</a><span class="k">class</span> <span class="nc">Items</span><span class="p">(</span><span class="n">TOP</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">API_KEY</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ENVIRONMENT</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Items</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="p">,</span> <span class="n">ENVIRONMENT</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">models</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;items&#39;</span><span class="p">:</span><span class="n">Item</span><span class="p">,</span> <span class="s">&#39;item_search&#39;</span><span class="p">:</span><span class="n">ItemSearch</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;items&#39;</span><span class="p">,</span> <span class="s">&#39;total_results&#39;</span><span class="p">,</span> <span class="s">&#39;item_search&#39;</span><span class="p">]</span>
    
<div class="viewcode-block" id="Items.custom_get"><a class="viewcode-back" href="../item.html#item.Items.custom_get">[docs]</a>    <span class="k">def</span> <span class="nf">custom_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outer_id</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&#39;&#39;&#39;taobao.items.custom.get 根据外部ID取商品</span>
<span class="sd">        </span>
<span class="sd">        跟据卖家设定的商品外部id获取商品 这个商品对应卖家从传入的session中获取，需要session绑定&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.items.custom.get&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;outer_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">outer_id</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fields</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">Item</span><span class="p">()</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">fields</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;fields&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span>
    </div>
<div class="viewcode-block" id="Items.get"><a class="viewcode-back" href="../item.html#item.Items.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.items.get 搜索商品信息</span>
<span class="sd">        </span>
<span class="sd">        根据传入的搜索条件，获取商品列表（类似于淘宝页面上的商品搜索功能，但是只有搜索到的商品列表，不包含商品的ItemCategory列表） 只能获得商品的部分信息，商品的详细信息请通过taobao.item.get获取 如果只输入fields其他条件都不输入，系统会因为搜索条件不足而报错。 不能通过设置cid=0来查询。&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.items.get&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fields</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">Item</span><span class="p">()</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">fields</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;fields&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fields</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;q&#39;</span><span class="p">,</span> <span class="s">&#39;nicks&#39;</span><span class="p">,</span> <span class="s">&#39;cid&#39;</span><span class="p">,</span> <span class="s">&#39;props&#39;</span><span class="p">,</span> <span class="s">&#39;product_id&#39;</span><span class="p">,</span> <span class="s">&#39;page_no&#39;</span><span class="p">,</span> <span class="s">&#39;order_by&#39;</span><span class="p">,</span> <span class="s">&#39;ww_status&#39;</span><span class="p">,</span> <span class="s">&#39;post_free&#39;</span><span class="p">,</span> <span class="s">&#39;location_state&#39;</span><span class="p">,</span> <span class="s">&#39;location_city&#39;</span><span class="p">,</span> <span class="s">&#39;is_3D&#39;</span><span class="p">,</span> <span class="s">&#39;start_score&#39;</span><span class="p">,</span> <span class="s">&#39;end_score&#39;</span><span class="p">,</span> <span class="s">&#39;start_volume&#39;</span><span class="p">,</span> <span class="s">&#39;end_volume&#39;</span><span class="p">,</span> <span class="s">&#39;one_station&#39;</span><span class="p">,</span> <span class="s">&#39;is_cod&#39;</span><span class="p">,</span> <span class="s">&#39;is_mall&#39;</span><span class="p">,</span> <span class="s">&#39;is_prepay&#39;</span><span class="p">,</span> <span class="s">&#39;genuine_security&#39;</span><span class="p">,</span> <span class="s">&#39;stuff_status&#39;</span><span class="p">,</span> <span class="s">&#39;start_price&#39;</span><span class="p">,</span> <span class="s">&#39;end_price&#39;</span><span class="p">,</span> <span class="s">&#39;page_size&#39;</span><span class="p">,</span> <span class="s">&#39;promoted_service&#39;</span><span class="p">,</span> <span class="s">&#39;is_xinpin&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">v</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span> <span class="k">continue</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s">&#39;location_state&#39;</span><span class="p">:</span> <span class="n">k</span> <span class="o">=</span> <span class="s">&#39;location.state&#39;</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s">&#39;location_city&#39;</span><span class="p">:</span> <span class="n">k</span> <span class="o">=</span> <span class="s">&#39;location.city&#39;</span>
            <span class="n">request</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span>
    </div>
<div class="viewcode-block" id="Items.inventory_get"><a class="viewcode-back" href="../item.html#item.Items.inventory_get">[docs]</a>    <span class="k">def</span> <span class="nf">inventory_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.items.inventory.get 得到当前会话用户库存中的商品列表</span>
<span class="sd">        </span>
<span class="sd">        获取当前用户作为卖家的仓库中的商品列表，并能根据传入的搜索条件对仓库中的商品列表进行过滤 只能获得商品的部分信息，商品的详细信息请通过taobao.item.get获取&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.items.inventory.get&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fields</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">Item</span><span class="p">()</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">fields</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;fields&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fields</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;q&#39;</span><span class="p">,</span> <span class="s">&#39;banner&#39;</span><span class="p">,</span> <span class="s">&#39;cid&#39;</span><span class="p">,</span> <span class="s">&#39;seller_cids&#39;</span><span class="p">,</span> <span class="s">&#39;page_no&#39;</span><span class="p">,</span> <span class="s">&#39;page_size&#39;</span><span class="p">,</span> <span class="s">&#39;has_discount&#39;</span><span class="p">,</span> <span class="s">&#39;order_by&#39;</span><span class="p">,</span> <span class="s">&#39;is_taobao&#39;</span><span class="p">,</span> <span class="s">&#39;is_ex&#39;</span><span class="p">,</span> <span class="s">&#39;start_modified&#39;</span><span class="p">,</span> <span class="s">&#39;end_modified&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">v</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span> <span class="k">continue</span>
            <span class="n">request</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span>
    </div>
<div class="viewcode-block" id="Items.list_get"><a class="viewcode-back" href="../item.html#item.Items.list_get">[docs]</a>    <span class="k">def</span> <span class="nf">list_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iids</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[],</span> <span class="n">session</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.items.list.get 批量获取商品信息</span>
<span class="sd">        </span>
<span class="sd">        查看非公开属性时需要用户登录&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.items.list.get&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iids&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iids</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fields</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">Item</span><span class="p">()</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">fields</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;fields&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span>
    </div>
<div class="viewcode-block" id="Items.onsale_get"><a class="viewcode-back" href="../item.html#item.Items.onsale_get">[docs]</a>    <span class="k">def</span> <span class="nf">onsale_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.items.onsale.get 获取当前会话用户出售中的商品列表</span>
<span class="sd">        </span>
<span class="sd">        获取当前用户作为卖家的出售中的商品列表，并能根据传入的搜索条件对出售中的商品列表进行过滤 只能获得商品的部分信息，商品的详细信息请通过taobao.item.get获取&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.items.onsale.get&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fields</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">Item</span><span class="p">()</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">fields</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;fields&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fields</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;q&#39;</span><span class="p">,</span> <span class="s">&#39;banner&#39;</span><span class="p">,</span> <span class="s">&#39;cid&#39;</span><span class="p">,</span> <span class="s">&#39;seller_cids&#39;</span><span class="p">,</span> <span class="s">&#39;page_no&#39;</span><span class="p">,</span> <span class="s">&#39;has_discount&#39;</span><span class="p">,</span> <span class="s">&#39;has_showcase&#39;</span><span class="p">,</span> <span class="s">&#39;order_by&#39;</span><span class="p">,</span> <span class="s">&#39;is_taobao&#39;</span><span class="p">,</span> <span class="s">&#39;is_ex&#39;</span><span class="p">,</span> <span class="s">&#39;page_size&#39;</span><span class="p">,</span> <span class="s">&#39;start_modified&#39;</span><span class="p">,</span> <span class="s">&#39;end_modified&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">v</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span> <span class="k">continue</span>
            <span class="n">request</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span>
    </div>
<div class="viewcode-block" id="Items.search"><a class="viewcode-back" href="../item.html#item.Items.search">[docs]</a>    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.items.search 搜索商品信息</span>
<span class="sd">        </span>
<span class="sd">        - 根据传入的搜索条件，获取商品列表和商品类目信息ItemCategory列表（类似于淘宝页面上的商品搜索功能，与 taobao.items.get的区别在于：这个方法得到的结果既有商品列表，又有类目信息列表） </span>
<span class="sd">        - 商品列表里只能获得商品的部分信息，商品的详细信息请通过taobao.item.get获取 </span>
<span class="sd">        - 商品类目信息列表里只包含类目id和该类目下商品的数量 </span>
<span class="sd">        - 不能通过设置cid=0来查询&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.items.search&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fields</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">Item</span><span class="p">()</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">fields</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;fields&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fields</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;q&#39;</span><span class="p">,</span> <span class="s">&#39;nicks&#39;</span><span class="p">,</span> <span class="s">&#39;cid&#39;</span><span class="p">,</span> <span class="s">&#39;props&#39;</span><span class="p">,</span> <span class="s">&#39;product_id&#39;</span><span class="p">,</span> <span class="s">&#39;order_by&#39;</span><span class="p">,</span> <span class="s">&#39;ww_status&#39;</span><span class="p">,</span> <span class="s">&#39;post_free&#39;</span><span class="p">,</span> <span class="s">&#39;location_state&#39;</span><span class="p">,</span> <span class="s">&#39;location_city&#39;</span><span class="p">,</span> <span class="s">&#39;is_3D&#39;</span><span class="p">,</span> <span class="s">&#39;start_score&#39;</span><span class="p">,</span> <span class="s">&#39;end_score&#39;</span><span class="p">,</span> <span class="s">&#39;start_volume&#39;</span><span class="p">,</span> <span class="s">&#39;end_volume&#39;</span><span class="p">,</span> <span class="s">&#39;one_station&#39;</span><span class="p">,</span> <span class="s">&#39;is_cod&#39;</span><span class="p">,</span> <span class="s">&#39;is_mall&#39;</span><span class="p">,</span> <span class="s">&#39;is_prepay&#39;</span><span class="p">,</span> <span class="s">&#39;genuine_security&#39;</span><span class="p">,</span> <span class="s">&#39;promoted_service&#39;</span><span class="p">,</span> <span class="s">&#39;stuff_status&#39;</span><span class="p">,</span> <span class="s">&#39;start_price&#39;</span><span class="p">,</span> <span class="s">&#39;end_price&#39;</span><span class="p">,</span> <span class="s">&#39;page_no&#39;</span><span class="p">,</span> <span class="s">&#39;page_size&#39;</span><span class="p">,</span> <span class="s">&#39;auction_flag&#39;</span><span class="p">,</span> <span class="s">&#39;auto_post&#39;</span><span class="p">,</span> <span class="s">&#39;has_discount&#39;</span><span class="p">,</span> <span class="s">&#39;is_xinpin&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">v</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span> <span class="k">continue</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s">&#39;location_state&#39;</span><span class="p">:</span> <span class="n">k</span> <span class="o">=</span> <span class="s">&#39;location.state&#39;</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s">&#39;location_city&#39;</span><span class="p">:</span> <span class="n">k</span> <span class="o">=</span> <span class="s">&#39;location.city&#39;</span>
            <span class="n">request</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_search</span>
    
</div></div>
<div class="viewcode-block" id="Sku"><a class="viewcode-back" href="../item.html#item.Sku">[docs]</a><span class="k">class</span> <span class="nc">Sku</span><span class="p">(</span><span class="n">TOP</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Sku结构&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">API_KEY</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ENVIRONMENT</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Sku</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="p">,</span> <span class="n">ENVIRONMENT</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">models</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;created&#39;</span><span class="p">:</span><span class="n">TOPDate</span><span class="p">,</span> <span class="s">&#39;modified&#39;</span><span class="p">:</span><span class="n">TOPDate</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;sku_id&#39;</span><span class="p">,</span><span class="s">&#39;num_iid&#39;</span><span class="p">,</span><span class="s">&#39;properties&#39;</span><span class="p">,</span><span class="s">&#39;quantity&#39;</span><span class="p">,</span><span class="s">&#39;price&#39;</span><span class="p">,</span><span class="s">&#39;outer_id&#39;</span><span class="p">,</span><span class="s">&#39;created&#39;</span><span class="p">,</span><span class="s">&#39;modified&#39;</span><span class="p">,</span><span class="s">&#39;status&#39;</span><span class="p">]</span>
    
<div class="viewcode-block" id="Sku.add"><a class="viewcode-back" href="../item.html#item.Sku.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">properties</span><span class="p">,</span> <span class="n">quantity</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="n">outer_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">item_price</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.sku.add 添加SKU</span>
<span class="sd">        </span>
<span class="sd">        新增一个sku到num_iid指定的商品中 传入的iid所对应的商品必须属于当前会话的用户&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.sku.add&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;properties&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">properties</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;quantity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">quantity</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">price</span>
        <span class="k">if</span> <span class="n">outer_id</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;outer_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">outer_id</span>
        <span class="k">if</span> <span class="n">item_price</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;item_price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_price</span>
        <span class="k">if</span> <span class="n">lang</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;lang&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lang</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;sku&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="Sku.delete"><a class="viewcode-back" href="../item.html#item.Sku.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">properties</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="n">item_price</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">item_num</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.sku.delete 删除SKU</span>
<span class="sd">        </span>
<span class="sd">        删除一个sku的数据 需要删除的sku通过属性properties进行匹配查找&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.sku.delete&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;properties&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">properties</span>
        <span class="k">if</span> <span class="n">item_num</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;item_num&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_num</span>
        <span class="k">if</span> <span class="n">item_price</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;item_price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_price</span>
        <span class="k">if</span> <span class="n">lang</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;lang&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lang</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;sku&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="Sku.get"><a class="viewcode-back" href="../item.html#item.Sku.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sku_id</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[],</span> <span class="n">num_iid</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">nick</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.sku.get 获取SKU</span>
<span class="sd">        </span>
<span class="sd">        获取sku_id所对应的sku数据 sku_id对应的sku要属于传入的nick对应的卖家&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.sku.get&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;sku_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sku_id</span>
        <span class="k">if</span> <span class="n">num_iid</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="k">if</span> <span class="n">nick</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;nick&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nick</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fields</span><span class="p">:</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;fields&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">)[</span><span class="s">&#39;sku&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="Sku.price_update"><a class="viewcode-back" href="../item.html#item.Sku.price_update">[docs]</a>    <span class="k">def</span> <span class="nf">price_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">properties</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">outer_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">item_price</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.sku.price.update 更新商品SKU的价格</span>
<span class="sd">        </span>
<span class="sd">        更新商品SKU的价格&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.sku.price.update&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;properties&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">properties</span>
        <span class="k">if</span> <span class="n">quantity</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;quantity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">quantity</span>
        <span class="k">if</span> <span class="n">price</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">price</span>
        <span class="k">if</span> <span class="n">outer_id</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;outer_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">outer_id</span>
        <span class="k">if</span> <span class="n">item_price</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;item_price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_price</span>
        <span class="k">if</span> <span class="n">lang</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;lang&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lang</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;sku&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="Sku.update"><a class="viewcode-back" href="../item.html#item.Sku.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">properties</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">outer_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">item_price</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.sku.update 更新SKU信息</span>
<span class="sd">        </span>
<span class="sd">        - 更新一个sku的数据 </span>
<span class="sd">        - 需要更新的sku通过属性properties进行匹配查找 </span>
<span class="sd">        - 商品的数量和价格必须大于等于0 </span>
<span class="sd">        - sku记录会更新到指定的num_iid对应的商品中 </span>
<span class="sd">        - num_iid对应的商品必须属于当前的会话用户&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.sku.update&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;properties&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">properties</span>
        <span class="k">if</span> <span class="n">quantity</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;quantity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">quantity</span>
        <span class="k">if</span> <span class="n">price</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">price</span>
        <span class="k">if</span> <span class="n">outer_id</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;outer_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">outer_id</span>
        <span class="k">if</span> <span class="n">item_price</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;item_price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_price</span>
        <span class="k">if</span> <span class="n">lang</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;lang&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lang</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;sku&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    
</div></div>
<div class="viewcode-block" id="Skus"><a class="viewcode-back" href="../item.html#item.Skus">[docs]</a><span class="k">class</span> <span class="nc">Skus</span><span class="p">(</span><span class="n">TOP</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">API_KEY</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ENVIRONMENT</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Users</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="p">,</span> <span class="n">ENVIRONMENT</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">models</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;skus&#39;</span><span class="p">:</span><span class="n">Sku</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;skus&#39;</span><span class="p">]</span>
    
<div class="viewcode-block" id="Skus.get"><a class="viewcode-back" href="../item.html#item.Skus.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iids</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.sku.get 获取SKU</span>
<span class="sd">        </span>
<span class="sd">        获取sku_id所对应的sku数据 sku_id对应的sku要属于传入的nick对应的卖家&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.sku.get&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iids&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iids</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fields</span><span class="p">:</span>
            <span class="n">sku</span> <span class="o">=</span> <span class="n">Sku</span><span class="p">()</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">sku</span><span class="o">.</span><span class="n">fields</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;fields&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">skus</span>
    </div>
<div class="viewcode-block" id="Skus.custom_get"><a class="viewcode-back" href="../item.html#item.Skus.custom_get">[docs]</a>    <span class="k">def</span> <span class="nf">custom_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outer_id</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&#39;&#39;&#39;taobao.skus.custom.get 根据外部ID取商品SKU</span>
<span class="sd">        </span>
<span class="sd">        跟据卖家设定的Sku的外部id获取商品，如果一个outer_id对应多个Sku会返回所有符合条件的sku 这个Sku所属卖家从传入的session中获取，需要session绑定(注：iid标签里是num_iid的值，可以用作num_iid使用)&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.skus.custom.get&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;outer_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">outer_id</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fields</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">Item</span><span class="p">()</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">fields</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;fields&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">skus</span>
    
</div></div>
<div class="viewcode-block" id="ItemImg"><a class="viewcode-back" href="../item.html#item.ItemImg">[docs]</a><span class="k">class</span> <span class="nc">ItemImg</span><span class="p">(</span><span class="n">TOP</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;ItemImg结构&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">API_KEY</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ENVIRONMENT</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ItemImg</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="p">,</span> <span class="n">ENVIRONMENT</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">models</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;created&#39;</span><span class="p">:</span><span class="n">TOPDate</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;url&#39;</span><span class="p">,</span><span class="s">&#39;position&#39;</span><span class="p">,</span><span class="s">&#39;created&#39;</span><span class="p">]</span>
    
<div class="viewcode-block" id="ItemImg.delete"><a class="viewcode-back" href="../item.html#item.ItemImg.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.img.delete 删除商品图片</span>
<span class="sd">        </span>
<span class="sd">        删除itemimg_id 所指定的商品图片 传入的num_iid所对应的商品必须属于当前会话的用户 itemimg_id对应的图片需要属于num_iid对应的商品&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.img.delete&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;item_img&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="ItemImg.upload"><a class="viewcode-back" href="../item.html#item.ItemImg.upload">[docs]</a>    <span class="k">def</span> <span class="nf">upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">is_major</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.img.upload 添加商品图片</span>
<span class="sd">        </span>
<span class="sd">        添加一张商品图片到num_iid指定的商品中 传入的num_iid所对应的商品必须属于当前会话的用户 如果更新图片需要设置itemimg_id，且该itemimg_id的图片记录需要属于传入的num_iid对应的商品。如果新增图片则不用设置 商品图片有数量和大小上的限制，根据卖家享有的服务（如：卖家订购了多图服务等），商品图片数量限制不同。&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.img.upload&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="k">if</span> <span class="nb">id</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="k">if</span> <span class="n">position</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;position&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>
        <span class="k">if</span> <span class="n">image</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;image&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">image</span>
        <span class="k">if</span> <span class="n">is_major</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;is_major&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_major</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;item_img&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="ItemImg.joint_img"><a class="viewcode-back" href="../item.html#item.ItemImg.joint_img">[docs]</a>    <span class="k">def</span> <span class="nf">joint_img</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">pic_path</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">is_major</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.joint.img 商品关联子图</span>
<span class="sd">        </span>
<span class="sd">        - 关联一张商品图片到num_iid指定的商品中 </span>
<span class="sd">        - 传入的num_iid所对应的商品必须属于当前会话的用户 </span>
<span class="sd">        - 商品图片关联在卖家身份和图片来源上的限制，卖家要是B卖家或订购了多图服务才能关联图片，并且图片要来自于卖家自己的图片空间才行 </span>
<span class="sd">        - 商品图片数量有限制。不管是上传的图片还是关联的图片，他们的总数不能超过一定限额&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.joint.img&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;pic_path&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pic_path</span>
        <span class="k">if</span> <span class="nb">id</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="k">if</span> <span class="n">position</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;position&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>
        <span class="k">if</span> <span class="n">is_major</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;is_major&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_major</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;item_img&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    
</div></div>
<div class="viewcode-block" id="PropImg"><a class="viewcode-back" href="../item.html#item.PropImg">[docs]</a><span class="k">class</span> <span class="nc">PropImg</span><span class="p">(</span><span class="n">TOP</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;商品属性图片结构&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">API_KEY</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ENVIRONMENT</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ItemImg</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="p">,</span> <span class="n">ENVIRONMENT</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">models</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;created&#39;</span><span class="p">:</span><span class="n">TOPDate</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;url&#39;</span><span class="p">,</span><span class="s">&#39;properties&#39;</span><span class="p">,</span><span class="s">&#39;position&#39;</span><span class="p">,</span><span class="s">&#39;created&#39;</span><span class="p">]</span>
    
<div class="viewcode-block" id="PropImg.joint_prop"><a class="viewcode-back" href="../item.html#item.PropImg.joint_prop">[docs]</a>    <span class="k">def</span> <span class="nf">joint_prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">properties</span><span class="p">,</span> <span class="n">pic_path</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.joint.propimg 商品关联属性图</span>
<span class="sd">        </span>
<span class="sd">        - 关联一张商品属性图片到num_iid指定的商品中 </span>
<span class="sd">        - 传入的num_iid所对应的商品必须属于当前会话的用户 </span>
<span class="sd">        - 图片的属性必须要是颜色的属性，这个在前台显示的时候需要和sku进行关联的 </span>
<span class="sd">        - 商品图片关联在卖家身份和图片来源上的限制，卖家要是B卖家或订购了多图服务才能关联图片，并且图片要来自于卖家自己的图片空间才行 </span>
<span class="sd">        - 商品图片数量有限制。不管是上传的图片还是关联的图片，他们的总数不能超过一定限额，最多不能超过24张（每个颜色属性都有一张）&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.joint.prop&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;pic_path&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pic_path</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;properties&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">properties</span>
        <span class="k">if</span> <span class="nb">id</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="k">if</span> <span class="n">position</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;position&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;prop_img&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="PropImg.delete"><a class="viewcode-back" href="../item.html#item.PropImg.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.propimg.delete 删除属性图片</span>
<span class="sd">        </span>
<span class="sd">        删除propimg_id 所指定的商品属性图片 传入的num_iid所对应的商品必须属于当前会话的用户 propimg_id对应的属性图片需要属于num_iid对应的商品&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.propimg.delete&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;prop_img&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="PropImg.upload"><a class="viewcode-back" href="../item.html#item.PropImg.upload">[docs]</a>    <span class="k">def</span> <span class="nf">upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_iid</span><span class="p">,</span> <span class="n">properties</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.propimg.upload 添加或修改属性图片</span>
<span class="sd">        </span>
<span class="sd">        添加一张商品属性图片到num_iid指定的商品中 传入的num_iid所对应的商品必须属于当前会话的用户 图片的属性必须要是颜色的属性，这个在前台显示的时候需要和sku进行关联的 商品属性图片只有享有服务的卖家（如：淘宝大卖家、订购了淘宝多图服务的卖家）才能上传 商品属性图片有数量和大小上的限制，最多不能超过24张（每个颜色属性都有一张）。&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.propimg.upload&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_iid</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;properties&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">properties</span>
        <span class="k">if</span> <span class="nb">id</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="k">if</span> <span class="n">position</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;position&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>
        <span class="k">if</span> <span class="n">image</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">request</span><span class="p">[</span><span class="s">&#39;image&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;prop_img&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    
</div></div>
<div class="viewcode-block" id="Video"><a class="viewcode-back" href="../item.html#item.Video">[docs]</a><span class="k">class</span> <span class="nc">Video</span><span class="p">(</span><span class="n">TOP</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;商品视频关联记录&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">API_KEY</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ENVIRONMENT</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Video</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="p">,</span> <span class="n">ENVIRONMENT</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">models</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;created&#39;</span><span class="p">:</span><span class="n">TOPDate</span><span class="p">,</span> <span class="s">&#39;modified&#39;</span><span class="p">:</span><span class="n">TOPDate</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;video_id&#39;</span><span class="p">,</span><span class="s">&#39;url&#39;</span><span class="p">,</span><span class="s">&#39;created&#39;</span><span class="p">,</span><span class="s">&#39;modified&#39;</span><span class="p">,</span><span class="s">&#39;iid&#39;</span><span class="p">,</span><span class="s">&#39;num_iid&#39;</span><span class="p">]</span>
    
</div>
<div class="viewcode-block" id="ItemCategory"><a class="viewcode-back" href="../item.html#item.ItemCategory">[docs]</a><span class="k">class</span> <span class="nc">ItemCategory</span><span class="p">(</span><span class="n">TOP</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;商品查询分类结果&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">API_KEY</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ENVIRONMENT</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ItemCategory</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="p">,</span> <span class="n">ENVIRONMENT</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;category_id&#39;</span><span class="p">,</span><span class="s">&#39;count&#39;</span><span class="p">]</span>
    
</div>
<div class="viewcode-block" id="ProductPropImg"><a class="viewcode-back" href="../item.html#item.ProductPropImg">[docs]</a><span class="k">class</span> <span class="nc">ProductPropImg</span><span class="p">(</span><span class="n">TOP</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;产品属性图片&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">API_KEY</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ENVIRONMENT</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ProductPropImg</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="p">,</span> <span class="n">ENVIRONMENT</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">models</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;created&#39;</span><span class="p">:</span><span class="n">TOPDate</span><span class="p">,</span> <span class="s">&#39;modified&#39;</span><span class="p">:</span><span class="n">TOPDate</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;product_id&#39;</span><span class="p">,</span><span class="s">&#39;props&#39;</span><span class="p">,</span><span class="s">&#39;url&#39;</span><span class="p">,</span><span class="s">&#39;position&#39;</span><span class="p">,</span><span class="s">&#39;created&#39;</span><span class="p">,</span><span class="s">&#39;modified&#39;</span><span class="p">]</span>
    
<div class="viewcode-block" id="ProductPropImg.delete"><a class="viewcode-back" href="../item.html#item.ProductPropImg.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">product_id</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.product.propimg.delete 删除产品属性图</span>
<span class="sd">        </span>
<span class="sd">        1.传入属性图片ID 2.传入产品ID 删除一个产品的属性图片&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.product.propimg.delete&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;product_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">product_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;product_prop_img&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="ProductPropImg.upload"><a class="viewcode-back" href="../item.html#item.ProductPropImg.upload">[docs]</a>    <span class="k">def</span> <span class="nf">upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">product_id</span><span class="p">,</span> <span class="n">props</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.product.propimg.upload 上传单张产品属性图片，如果需要传多张，可调多次</span>
<span class="sd">        </span>
<span class="sd">        传入产品ID 传入props,目前仅支持颜色属性.调用taobao.itemprops.get.v2取得颜色属性pid, 再用taobao.itempropvalues.get取得vid;格式:pid:vid,只能传入一个颜色pid:vid串; 传入图片内容 注意：图片最大为2M,只支持JPG,GIF,如果需要传多张，可调多次&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.product.propimg.upload&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;product_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">product_id</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;props&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;image&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">image</span>
        <span class="k">if</span> <span class="nb">id</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span> <span class="n">request</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="k">if</span> <span class="n">position</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span> <span class="n">request</span><span class="p">[</span><span class="s">&#39;position&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;product_prop_img&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    
</div></div>
<div class="viewcode-block" id="ProductImg"><a class="viewcode-back" href="../item.html#item.ProductImg">[docs]</a><span class="k">class</span> <span class="nc">ProductImg</span><span class="p">(</span><span class="n">TOP</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;产品图片&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">API_KEY</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ENVIRONMENT</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ProductPropImg</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="p">,</span> <span class="n">ENVIRONMENT</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">models</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;created&#39;</span><span class="p">:</span><span class="n">TOPDate</span><span class="p">,</span> <span class="s">&#39;modified&#39;</span><span class="p">:</span><span class="n">TOPDate</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;product_id&#39;</span><span class="p">,</span><span class="s">&#39;url&#39;</span><span class="p">,</span><span class="s">&#39;position&#39;</span><span class="p">,</span><span class="s">&#39;created&#39;</span><span class="p">,</span><span class="s">&#39;modified&#39;</span><span class="p">]</span>
    
<div class="viewcode-block" id="ProductImg.delete"><a class="viewcode-back" href="../item.html#item.ProductImg.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">product_id</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.product.img.delete 删除产品非主图</span>
<span class="sd">        </span>
<span class="sd">        1.传入非主图ID 2.传入产品ID 删除产品非主图&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.product.img.delete&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;product_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">product_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;product_img&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="ProductImg.upload"><a class="viewcode-back" href="../item.html#item.ProductImg.upload">[docs]</a>    <span class="k">def</span> <span class="nf">upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">product_id</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">is_major</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.product.img.upload 上传单张产品非主图，如果需要传多张，可调多次</span>
<span class="sd">        </span>
<span class="sd">        1.传入产品ID 2.传入图片内容 注意：图片最大为500K,只支持JPG,GIF格式,如果需要传多张，可调多次&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.product.img.upload&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;product_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">product_id</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;image&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">image</span>
        <span class="k">if</span> <span class="nb">id</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span> <span class="n">request</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="k">if</span> <span class="n">position</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span> <span class="n">request</span><span class="p">[</span><span class="s">&#39;position&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>
        <span class="k">if</span> <span class="n">is_major</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span> <span class="n">request</span><span class="p">[</span><span class="s">&#39;is_major&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_major</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;product_img&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    
</div></div>
<div class="viewcode-block" id="AfterSale"><a class="viewcode-back" href="../item.html#item.AfterSale">[docs]</a><span class="k">class</span> <span class="nc">AfterSale</span><span class="p">(</span><span class="n">TOP</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;卖家设置售后服务对象&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">API_KEY</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ENVIRONMENT</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">AfterSale</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="p">,</span> <span class="n">ENVIRONMENT</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">models</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;after_sales&#39;</span><span class="p">:</span><span class="n">AfterSale</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;after_sales&#39;</span><span class="p">,</span> <span class="s">&#39;after_sale_id&#39;</span><span class="p">,</span><span class="s">&#39;after_sale_name&#39;</span><span class="p">,</span><span class="s">&#39;after_sale_path&#39;</span><span class="p">]</span>
    
<div class="viewcode-block" id="AfterSale.get"><a class="viewcode-back" href="../item.html#item.AfterSale.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.aftersale.get 查询用户售后服务模板</span>
<span class="sd">        </span>
<span class="sd">        查询用户设置的售后服务模板，仅返回标题和id&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.aftersale.get&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">after_sales</span>
    
</div></div>
<div class="viewcode-block" id="ItemTemplate"><a class="viewcode-back" href="../item.html#item.ItemTemplate">[docs]</a><span class="k">class</span> <span class="nc">ItemTemplate</span><span class="p">(</span><span class="n">TOP</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;宝贝详情页面信息&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">API_KEY</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ENVIRONMENT</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ItemTemplate</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="p">,</span> <span class="n">ENVIRONMENT</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;template_id&#39;</span><span class="p">,</span><span class="s">&#39;template_name&#39;</span><span class="p">,</span><span class="s">&#39;shop_type&#39;</span><span class="p">]</span>
    
</div>
<div class="viewcode-block" id="ItemTemplates"><a class="viewcode-back" href="../item.html#item.ItemTemplates">[docs]</a><span class="k">class</span> <span class="nc">ItemTemplates</span><span class="p">(</span><span class="n">TOP</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">API_KEY</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ENVIRONMENT</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ItemTemplate</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="p">,</span> <span class="n">ENVIRONMENT</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">models</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;item_template_list&#39;</span><span class="p">:</span><span class="n">ItemTemplate</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;item_template_list&#39;</span><span class="p">]</span>
    
<div class="viewcode-block" id="ItemTemplates.get"><a class="viewcode-back" href="../item.html#item.ItemTemplates.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.item.templates.get 获取用户宝贝详情页模板名称</span>
<span class="sd">        </span>
<span class="sd">        查询当前登录用户的店铺的宝贝详情页的模板名称&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.item.templates.get&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span>
    
</div></div>
<div class="viewcode-block" id="ItemSearch"><a class="viewcode-back" href="../item.html#item.ItemSearch">[docs]</a><span class="k">class</span> <span class="nc">ItemSearch</span><span class="p">(</span><span class="n">TOP</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;商品搜索&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">API_KEY</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ENVIRONMENT</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ItemSearch</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="p">,</span> <span class="n">ENVIRONMENT</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">models</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;items&#39;</span><span class="p">:</span><span class="n">Item</span><span class="p">,</span><span class="s">&#39;item_categories&#39;</span><span class="p">:</span><span class="n">ItemCategory</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;items&#39;</span><span class="p">,</span><span class="s">&#39;item_categories&#39;</span><span class="p">]</span>
    
</div>
<div class="viewcode-block" id="Product"><a class="viewcode-back" href="../item.html#item.Product">[docs]</a><span class="k">class</span> <span class="nc">Product</span><span class="p">(</span><span class="n">TOP</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;产品结构&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">API_KEY</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ENVIRONMENT</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Product</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="p">,</span> <span class="n">ENVIRONMENT</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">models</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;created&#39;</span><span class="p">:</span><span class="n">TOPDate</span><span class="p">,</span> <span class="s">&#39;modified&#39;</span><span class="p">:</span><span class="n">TOPDate</span><span class="p">,</span> <span class="s">&#39;product_imgs&#39;</span><span class="p">:</span><span class="n">ProductImg</span><span class="p">,</span><span class="s">&#39;product_prop_imgs&#39;</span><span class="p">:</span><span class="n">ProductPropImg</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;product_id&#39;</span><span class="p">,</span><span class="s">&#39;outer_id&#39;</span><span class="p">,</span><span class="s">&#39;created&#39;</span><span class="p">,</span><span class="s">&#39;tsc&#39;</span><span class="p">,</span><span class="s">&#39;cid&#39;</span><span class="p">,</span><span class="s">&#39;cat_name&#39;</span><span class="p">,</span><span class="s">&#39;props&#39;</span><span class="p">,</span><span class="s">&#39;props_str&#39;</span><span class="p">,</span><span class="s">&#39;binds_str&#39;</span><span class="p">,</span><span class="s">&#39;sale_props_str&#39;</span><span class="p">,</span><span class="s">&#39;collect_num&#39;</span><span class="p">,</span><span class="s">&#39;name&#39;</span><span class="p">,</span><span class="s">&#39;binds&#39;</span><span class="p">,</span><span class="s">&#39;sale_props&#39;</span><span class="p">,</span><span class="s">&#39;price&#39;</span><span class="p">,</span><span class="s">&#39;desc&#39;</span><span class="p">,</span><span class="s">&#39;pic_url&#39;</span><span class="p">,</span><span class="s">&#39;modified&#39;</span><span class="p">,</span><span class="s">&#39;product_imgs&#39;</span><span class="p">,</span><span class="s">&#39;product_prop_imgs&#39;</span><span class="p">,</span><span class="s">&#39;status&#39;</span><span class="p">,</span><span class="s">&#39;level&#39;</span><span class="p">,</span><span class="s">&#39;pic_path&#39;</span><span class="p">,</span><span class="s">&#39;vertical_market&#39;</span><span class="p">,</span><span class="s">&#39;customer_props&#39;</span><span class="p">,</span><span class="s">&#39;property_alias&#39;</span><span class="p">]</span>
    
<div class="viewcode-block" id="Product.add"><a class="viewcode-back" href="../item.html#item.Product.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">desc</span><span class="p">,</span> <span class="n">major</span><span class="p">,</span> <span class="n">market_time</span><span class="p">,</span> <span class="n">property_alias</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.product.add 上传一个产品，不包括产品非主图和属性图片</span>
<span class="sd">        </span>
<span class="sd">        获取类目ID，必需是叶子类目ID；调用taobao.itemcats.get.v2获取 传入关键属性,结构:pid:vid;pid:vid.调用taobao.itemprops.get.v2获取pid, 调用taobao.itempropvalues.get获取vid;如果碰到用户自定义属性,请用customer_props.&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.product.add&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;cid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cid</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">price</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;image&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">image</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;desc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">desc</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;major&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">major</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;market_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">market_time</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;property_alias&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">property_alias</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;outer_id&#39;</span><span class="p">,</span> <span class="s">&#39;props&#39;</span><span class="p">,</span> <span class="s">&#39;binds&#39;</span><span class="p">,</span> <span class="s">&#39;sale_props&#39;</span><span class="p">,</span> <span class="s">&#39;customer_props&#39;</span><span class="p">,</span> <span class="s">&#39;order_by&#39;</span><span class="p">,</span> <span class="s">&#39;ww_status&#39;</span><span class="p">,</span> <span class="s">&#39;post_free&#39;</span><span class="p">,</span> <span class="s">&#39;location_state&#39;</span><span class="p">,</span> <span class="s">&#39;location_city&#39;</span><span class="p">,</span> <span class="s">&#39;is_3D&#39;</span><span class="p">,</span> <span class="s">&#39;start_score&#39;</span><span class="p">,</span> <span class="s">&#39;end_score&#39;</span><span class="p">,</span> <span class="s">&#39;start_volume&#39;</span><span class="p">,</span> <span class="s">&#39;end_volume&#39;</span><span class="p">,</span> <span class="s">&#39;one_station&#39;</span><span class="p">,</span> <span class="s">&#39;is_cod&#39;</span><span class="p">,</span> <span class="s">&#39;is_mall&#39;</span><span class="p">,</span> <span class="s">&#39;is_prepay&#39;</span><span class="p">,</span> <span class="s">&#39;genuine_security&#39;</span><span class="p">,</span> <span class="s">&#39;promoted_service&#39;</span><span class="p">,</span> <span class="s">&#39;stuff_status&#39;</span><span class="p">,</span> <span class="s">&#39;start_price&#39;</span><span class="p">,</span> <span class="s">&#39;end_price&#39;</span><span class="p">,</span> <span class="s">&#39;page_no&#39;</span><span class="p">,</span> <span class="s">&#39;page_size&#39;</span><span class="p">,</span> <span class="s">&#39;auction_flag&#39;</span><span class="p">,</span> <span class="s">&#39;auto_post&#39;</span><span class="p">,</span> <span class="s">&#39;has_discount&#39;</span><span class="p">,</span> <span class="s">&#39;is_xinpin&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">v</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span> <span class="k">continue</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s">&#39;location_state&#39;</span><span class="p">:</span> <span class="n">k</span> <span class="o">=</span> <span class="s">&#39;location.state&#39;</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s">&#39;location_city&#39;</span><span class="p">:</span> <span class="n">k</span> <span class="o">=</span> <span class="s">&#39;location.city&#39;</span>
            <span class="n">request</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;product&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="Product.get"><a class="viewcode-back" href="../item.html#item.Product.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[],</span> <span class="n">product_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">cid</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.product.get 获取一个产品的信息</span>
<span class="sd">        </span>
<span class="sd">        两种方式查看一个产品详细信息: 传入product_id来查询 传入cid和props来查询&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.product.get&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fields</span><span class="p">:</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;fields&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fields</span>
        <span class="k">if</span> <span class="n">product_id</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span> <span class="n">request</span><span class="p">[</span><span class="s">&#39;product_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">product_id</span>
        <span class="k">if</span> <span class="n">cid</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span> <span class="n">request</span><span class="p">[</span><span class="s">&#39;cid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cid</span>
        <span class="k">if</span> <span class="n">props</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span> <span class="n">request</span><span class="p">[</span><span class="s">&#39;props&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">)[</span><span class="s">&#39;product&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    </div>
<div class="viewcode-block" id="Product.update"><a class="viewcode-back" href="../item.html#item.Product.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">product_id</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.product.update 修改一个产品，可以修改主图，不能修改子图片</span>
<span class="sd">        </span>
<span class="sd">        传入产品ID 可修改字段：outer_id,binds,sale_props,name,price,desc,image 注意：1.可以修改主图,不能修改子图片,主图最大500K,目前仅支持GIF,JPG 2.商城卖家产品发布24小时后不能作删除或修改操作&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.product.update&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;product_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">product_id</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;outer_id&#39;</span><span class="p">,</span> <span class="s">&#39;binds&#39;</span><span class="p">,</span> <span class="s">&#39;sale_props&#39;</span><span class="p">,</span> <span class="s">&#39;price&#39;</span><span class="p">,</span> <span class="s">&#39;desc&#39;</span><span class="p">,</span> <span class="s">&#39;image&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="s">&#39;major&#39;</span><span class="p">,</span> <span class="s">&#39;native_unkeyprops&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">v</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span> <span class="k">continue</span>
            <span class="n">request</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">)[</span><span class="s">&#39;product&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span>
    
</div></div>
<div class="viewcode-block" id="Products"><a class="viewcode-back" href="../item.html#item.Products">[docs]</a><span class="k">class</span> <span class="nc">Products</span><span class="p">(</span><span class="n">TOP</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">API_KEY</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ENVIRONMENT</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Products</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="n">API_KEY</span><span class="p">,</span> <span class="n">APP_SECRET</span><span class="p">,</span> <span class="n">ENVIRONMENT</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">models</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;products&#39;</span><span class="p">:</span><span class="n">Product</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;products&#39;</span><span class="p">,</span> <span class="s">&#39;total_results&#39;</span><span class="p">]</span>
    
<div class="viewcode-block" id="Products.get"><a class="viewcode-back" href="../item.html#item.Products.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nick</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[],</span> <span class="n">props</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">page_no</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">page_size</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.products.get 获取产品列表</span>
<span class="sd">        </span>
<span class="sd">        根据淘宝会员帐号搜索所有产品信息 注意：支持分页，每页最多返回100条,默认值为40,页码从1开始，默认为第一页&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.products.get&#39;</span><span class="p">)</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;nick&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nick</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fields</span><span class="p">:</span>
            <span class="n">product</span> <span class="o">=</span> <span class="n">Product</span><span class="p">()</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">product</span><span class="o">.</span><span class="n">fields</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;fields&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fields</span>
        <span class="k">if</span> <span class="n">props</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span> <span class="n">request</span><span class="p">[</span><span class="s">&#39;props&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span>
        <span class="k">if</span> <span class="n">page_no</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span> <span class="n">request</span><span class="p">[</span><span class="s">&#39;page_no&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">page_no</span>
        <span class="k">if</span> <span class="n">page_size</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span> <span class="n">request</span><span class="p">[</span><span class="s">&#39;page_size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">page_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">products</span>
    </div>
<div class="viewcode-block" id="Products.search"><a class="viewcode-back" href="../item.html#item.Products.search">[docs]</a>    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;taobao.products.search 搜索产品信息</span>
<span class="sd">        </span>
<span class="sd">        两种方式搜索所有产品信息(二种至少传一种): 传入关键字q搜索 传入cid和props搜索 返回值支持:product_id,name,pic_path,cid,props,price,tsc 当用户指定了cid并且cid为垂直市场（3C电器城、鞋城）的类目id时，默认只返回小二确认的产品。如果用户没有指定cid，或cid为普通的类目，默认返回商家确认或小二确认的产品。如果用户自定了status字段，以指定的status类型为准&#39;&#39;&#39;</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">TOPRequest</span><span class="p">(</span><span class="s">&#39;taobao.products.search&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fields</span><span class="p">:</span>
            <span class="n">product</span> <span class="o">=</span> <span class="n">Product</span><span class="p">()</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">product</span><span class="o">.</span><span class="n">fields</span>
        <span class="n">request</span><span class="p">[</span><span class="s">&#39;fields&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fields</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;q&#39;</span><span class="p">,</span> <span class="s">&#39;cid&#39;</span><span class="p">,</span> <span class="s">&#39;props&#39;</span><span class="p">,</span> <span class="s">&#39;status&#39;</span><span class="p">,</span> <span class="s">&#39;page_no&#39;</span><span class="p">,</span> <span class="s">&#39;page_size&#39;</span><span class="p">,</span> <span class="s">&#39;vertical_market&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">v</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span> <span class="k">continue</span>
            <span class="n">request</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">request</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">products</span>
</pre></div></div></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">pyTOP 0.1.1 documentation</a> &raquo;</li>
          <li><a href="index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Prof Syd Xu.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>